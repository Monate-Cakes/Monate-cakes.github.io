generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model Partner {
  id                 Int              @id @default(autoincrement())
  name               String
  email              String           @unique
  whatsapp           String
  province           String
  city               String
  website            String
  specialties        Json
  bestSelling        String
  customerRange      String
  revenueRange       String
  motivationalLetter String
  images             Json
  approved           Boolean          @default(false)
  createdAt          DateTime         @default(now())
  partnerProducts    PartnerProduct[]
}

model Product {
  id              Int              @id @default(autoincrement())
  name            String           @unique
  category        String
  description     String
  partnerProducts PartnerProduct[]
}

model PartnerProduct {
  partnerId Int
  productId Int

  partner Partner @relation(fields: [partnerId], references: [id])
  product Product @relation(fields: [productId], references: [id])

  @@id([partnerId, productId])
}

model CustomRequest {
  id          Int      @id @default(autoincrement())
  description String
  images      Json
  email       String
  whatsapp    String
  province    String
  city        String
  status      String   @default("new")
  createdAt   DateTime @default(now())
}

model Location {
  id           Int    @id @default(autoincrement())
  province     String
  city         String
  partnerCount Int    @default(0)
}

model User {
  id           Int    @id @default(autoincrement())
  email        String @unique
  passwordHash String
  role         String
}
